<div class="shop-container">
  <section id="bags-section" class="bags-section">
    <h2>Bags</h2>
    <div class="catalogs">
      <% if (products && products.length > 0) { %>
      <% products.forEach(function(product) { %>
      <% if (product.category.toLowerCase() === 'bags') { %>
      <div class="product">
        <!-- Product ID is now stored in a data attribute, not visible directly -->
        <img src="<%= product.imageURL %>" alt="<%= product.name %>">
        <h3><%= product.name %></h3>
        <p>$<%= typeof product.price === 'number' ? product.price.toFixed(2) :
          '0.00' %></p>
        <!-- Updated form for adding to cart -->
        <form action="/addToCart" method="POST">
          <input type="hidden" name="productId" value="<%= product._id %>">
          <button type="submit" class="buy-button">Add to Cart</button>
        </form>
      </div>
      <% } %>
      <% }); %>
      <% } else { %>
      <p>No products found.</p>
      <% } %>
    </div>
  </section>

  <section id="perfume-section" class="perfume-section">
    <h2>Perfumes</h2>
    <div class="catalogs">
      <% if (products && products.length > 0) { %>
      <% products.forEach(function(product) { %>
      <% if (product.category.toLowerCase() === 'perfume') { %>
      <div class="product">
        <img src="<%= product.imageURL %>" alt="<%= product.name %>">
        <h3><%= product.name %></h3>
        <p>$<%= typeof product.price === 'number' ? product.price.toFixed(2) :
          '0.00' %></p>
        <form action="/addToCart" method="POST">
          <input type="hidden" name="productId" value="<%= product._id %>">
          <button type="submit" class="buy-button">Add to Cart</button>
        </form>
      </div>
      <% } %>
      <% }); %>
      <% } else { %>
      <p>No products found.</p>
      <% } %>
    </div>
  </section>
</div>